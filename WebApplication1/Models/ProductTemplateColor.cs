using System;
using System.ComponentModel;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using System.Linq;

namespace TechmerVision.Models
{
    ////////////////////////////////////////////////////////////////////////////////////////////////////
    /// <summary>   A product template color. </summary>
    ///
    /// <remarks>   Aedmonds, 8/25/2017. </remarks>
    ////////////////////////////////////////////////////////////////////////////////////////////////////

    public class ProductTemplateColor: IImage
    {
        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets the identifier. </summary>
        ///
        /// <value> The identifier. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public long Id { get; set; }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets the identifier of the product template. </summary>
        ///
        /// <value> The identifier of the product template. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public long ProductTemplateId { get; set; }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets the color number. </summary>
        ///
        /// <value> The color number. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public int ColorNumber { get; set; }


        #region ColorData

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets the internal color string. </summary>
        ///
        /// <value> The internal color string. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        [EditorBrowsable(EditorBrowsableState.Never)]
        public string InternalColorString { get; set; }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets information describing the color. </summary>
        ///
        /// <value> Information describing the color. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        [NotMapped]
        public int[] ColorData
        {
            get
            {
                return Array.ConvertAll(InternalColorString.Split(','), int.Parse);
            }
            set
            {
                var _data = value;
                InternalColorString = String.Join(",", _data.Select(p => p.ToString()).ToArray());
            }
        }

        #endregion

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets the recolor tolerance upper limit. </summary>
        ///
        /// <value> The recolor tolerance upper limit. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public int RecolorToleranceUpperLimit { get; set; }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets the recolor tolerance lower limit. </summary>
        ///
        /// <value> The recolor tolerance lower limit. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public int RecolorToleranceLowerLimit { get; set; }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets the image. </summary>
        ///
        /// <value> The image. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        [NotMapped]
        public String Image { get; set; }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets the filename of the file. </summary>
        ///
        /// <value> The name of the file. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public String FileName { get; set; }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Accessor property for the linked product template. </summary>
        ///
        /// <value> The product template. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        [ForeignKey("ProductTemplateId")]
        public ProductTemplate ProductTemplate { get; set; }

    }
}